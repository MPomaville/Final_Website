---
title: Second Graph - Global GDP per Capita 1952 vs 2007
author: Matt Pomaville
date: '2018-06-13'
slug: second-graph-global-gdp-per-capita-1952-vs-2007
categories:
  - CS631
  - R
tags:
  - ggplot
description: Desc
hacker_news_id: ''
lobsters_id: ''
meta_img: /images/image.jpg
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
#Change in GDP per Capita graph brief

This is a brief describing the graph created from the gapminder dataset. It is available as a CRAN Package by installing `gapminder` and calling `library(gapminder)` during setup. 

##Load required libraries
To make this graph I used the `tidyverse`, `gapminder`, and `wesanderson` libraries.

```{r message = FALSE}
library(tidyverse)
library(gapminder)
library(wesanderson)
```
##Cleaning up the gapminder data
The gapminder dataset is gigantic and because for this plot I was only interested in the 1952 and 2007 data I filtered for only that data. I also deleted the datapoint for Kuwait in 1952 by filtering for only GDP per Capita values less than $50,000. This is noted in the graph. 

```{r message = FALSE}
gapminder_gdp <- gapminder %>%
  filter(year == 1952 | year == 2007) %>% 
  filter(gdpPercap <= 50000) %>% 
  mutate(year = as.factor(year))
```
##Making the graph

I then made a simple parallel coordinates plot comparing the national GDP per Capita in 1952 and 2007 for all countries.  
```{r echo = FALSE}
ggplot(gapminder_gdp, aes(x = year, y = gdpPercap, group = country, color = continent))+
  geom_point()+
  geom_line(alpha = 0.5)+
  #geom_boxplot(aes(x = year, y = gdpPercap), outlier.shape = NA)+
  scale_color_manual(values = wes_palette("Darjeeling1"))+
  facet_wrap(~continent)+
  ggtitle("Change in GDP per capita from 1952 to 2007")+
  labs(x = "Year", y = "GDP per capita", color = "Continent", caption = "Note: The value for Kuwait in 1952 ($108,382.35) is excluded for readibility.")+
  theme_bw()
  
```

#Analyzing the Graph
##Type of Graph

This graph is a simple parallel coordinates plot. On a larger scale, this presentation can be used to shor trends across large sets of data taken at matching points. 

##Data used

For this graph I used the `gapminder` dataset generated by Jennifer Bryan and available through CRAN as an R library. The original dataset has 6 columns:

*country - a character string with the name of the country the data was collected from
*continent - a character string with the continent the country is part of
*year - The year the data was collected
*lifeExp - The average life expectancy of the country in a given year
*pop - The population of the country in a given year
*gdpPercap - The GDP per Capita of the country in a given year

The data in the original set has values from 1952 to 2007 for all countries.

##Audience
This graph is meant for general population consumption by people interested in global macroeconomic trends over multiple decades. 

##Description

This graph represents the GDP per Capita on a linear scale on the y-axis. It is broken into individual plots for each continent, and each plot is colored independently. Within each sub-plot the x-axis is the years 1952 and 2007, marking the years the data used was drawn from. Data points for each country are graphed using dots, and the slope of the change is represented with a line cpnnecting the dots.

The big takeaway in reading the graph is that most countries have a higher GDP per capita in 2007 than they did in 1952.


###How to read it
As with many graphs, the best place to start reading a parallel coordinated plot is to look for a trend in the y-values as the x-values change. In this case, are the lines between 1952 and 2007 generally moving slanted up or down?

###Annotation and Presentation
Annotations or color added to specific data points can be used to highlight a specific country on each continent. For example, I could color the country with the most change black, or the country with the least change red. Both axis can be scaled linearly or logarithmically. 

###Variations
The same data could be represented using box plots for the 1952 and 2007 data rather than points connected by lines. A disadvantage of this is the inability to identify the change seen in outlier countries.

##Methods

This graph was created using the following code:
```{r eval = FALSE}
ggplot(gapminder_gdp, aes(x = year, y = gdpPercap, group = country, color = continent))+
  geom_point()+
  geom_line(alpha = 0.5)+
  #geom_boxplot(aes(x = year, y = gdpPercap), outlier.shape = NA)+
  scale_color_manual(values = wes_palette("Darjeeling1"))+
  facet_wrap(~continent)+
  ggtitle("Change in GDP per capita from 1952 to 2007")+
  labs(x = "Year", y = "GDP per capita", color = "Continent", caption = "Note: The value for Kuwait in 1952 ($108,382.35) is excluded for readibility.")+
  theme_bw()
```

This code creates a general ggplot item using the gapminder_gdp data created earlier. It assigns `gdpPercap` to the y-axis and `year` to the x-axis. It also groups the data by `country` and assigns coloration by `continent`.
It then creates dot plot layer which inherits all attributes from the parent ggplot call.
Another `geom` layer is added, this time as a line plot. It inherits all attributes from the parent ggplot call, but adds an `alpha` value of 0.5 in order to make the lines easier to distinguish.
The `ggplot` finction `facet_wrap` is called to divide the large plot into a series of small sup-plots by continent.
Finally, a title, axis labels, color legend, and a caption note are added.

```{r echo = FALSE}
ggplot(gapminder_gdp, aes(x = year, y = gdpPercap, group = country, color = continent))+
  geom_point()+
  geom_line(alpha = 0.5)+
  #geom_boxplot(aes(x = year, y = gdpPercap), outlier.shape = NA)+
  scale_color_manual(values = wes_palette("Darjeeling1"))+
  facet_wrap(~continent)+
  ggtitle("Change in GDP per capita from 1952 to 2007")+
  labs(x = "Year", y = "GDP per capita", color = "Continent", caption = "Note: The value for Kuwait in 1952 ($108,382.35) is excluded for readibility.")+
  theme_bw()
```

